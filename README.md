# Проект: Модератор

Система управления объявлениями для модерации, [тестовое задание на стажировку в Авито](https://github.com/avito-tech/tech-internship/blob/main/Tech%20Internships/Frontend/Frontend-trainee-assignment-autumn-2025/Frontend-trainee-assignment-autumn-2025.md).

## Оглавление

1. [Установка и запуск](#установка-и-запуск)
   - [Локальный запуск](#локальный-запуск)
   - [Запуск через Docker Compose](#запуск-через-docker-compose)
2. [Структура проекта](#структура-проекта)
3. [Тестирование](#тестирование)
4. [Технологии](#технологии)
5. [Чек-лист функциональных требований](#чек-лист-функциональных-требований)
6. [Чек-лист дополнительных возможностей](#чек-лист-дополнительных-возможностей)

## Установка и запуск

⚠️ Для настройки API в фронтенд-приложении в режиме develop, **НЕ** нужно создавать файл `.env`, так как используется прокси в vite.config.ts. Информацию о запуске в режиме разработки можно посмотреть в соответствующих README.md файлах.

### Запуск через docker compose


Проект можно запустить в контейнеризированной среде с помощью Docker Compose.

#### Запуск в production режиме

```bash
docker compose -f docker-compose.prod.yml up --build
```

После запуска:
- **Frontend** будет доступен по адресу: `http://localhost:3000`
- **Backend API** будет доступен по адресу: `http://localhost:3001`


## Тестирование

В проекте используются [Vitest](https://vitest.dev) и [React Testing Library](https://testing-library.com/) для написания unit-тестов компонентов.

### Запуск тестов

```bash
pnpm test

# Запуск тестов с UI интерфейсом
pnpm test:ui
```

Все тесты находятся рядом с соответствующими компонентами в файлах с расширением `.test.tsx`.

## Структура проекта

```
frontend/src/
│
├── api/
│   ├── api-client.ts       # HTTP клиент (AxiosInstance)
│   ├── ads-api.ts          # API запросы для объявлений
│   ├── moderators-api.ts   # API запросы для модераторов
│   └── stats-api.ts        # API запросы для статистики
│
├── components/             # UI компоненты
│   ├── filters/            # Компоненты фильтров
│   │   ├── category-filter.tsx
│   │   ├── price-range-filter.tsx
│   │   ├── status-filter.tsx
│   │   └── index.ts
│   ├── stats/              # Компоненты статистики
│   │   ├── stat-card.tsx
│   │   ├── custom-bar-chart-tooltip.tsx
│   │   └── index.ts
│   ├── icons/              # Иконки
│   ├── ui/                 # UI элементы от shadcn/ui
│   ├── item-card.tsx       # Карточка объявления
│   ├── item-sortings.tsx   # Сортировка объявлений
│   ├── search-bar.tsx      # Поисковая строка
│   ├── status-badge.tsx    # Бейдж статуса
│   ├── priority-badge.tsx  # Бейдж приоритета
│   ├── image-gallery.tsx   # Галерея изображений
│   ├── mode-toggle.tsx     # Переключатель темы
│   └── theme-provider.tsx  # Провайдер темы
│
├── layouts/                # Лэйауты
│   └── main-layout.tsx
│
├── lib/                    # Вспомогательные утилиты
│   └── utils.ts            # Общие функции-хелперы
│
├── pages/                  # Страницы приложения
│   ├── main-page.tsx       # Главная страница (список объявлений)
│   ├── item-page.tsx       # Страница детального просмотра объявления
│   ├── stats-page.tsx      # Страница статистики
│   └── not-found-page.tsx  # Страница 404
│
├── shared/                 # Общие модули
│   ├── hooks/              # Кастомные хуки
│   │   ├── use-debounce-callback/
│   │   └── index.ts
│   └── types/              # Типы TypeScript
│       ├── ads.ts
│       ├── moderator.ts
│       ├── stats.ts
│       ├── consts.ts
│       ├── shared.ts
│       └── index.ts
│
├── tests/                  # Тесты
│   └── setup.ts            # Конфиг тестов
│
├── index.css               # Глобальные стили (+ Tailwind/shadcn)
├── main.tsx                # Точка входа
└── vite-env.d.ts           # Типы Vite

backend/                 # Серверная часть приложения
```

## Технологии

- [TypeScript](https://www.typescriptlang.org) - суперсет JavaScript (компилятор), предоставляющий статическую типизацию. С ним работать и быстрее, и приятнее.

- [Vite](https://vitejs.dev) - Наилучший инструмент для настройки среды разработки, удобно начинать проект, намного быстрее чем webpack.

- [TanStack Query (React Query)](https://tanstack.com/query) - Библиотека для управления серверным состоянием. Упрощает работу с API, предоставляет кэширование, автоматическую синхронизацию и обновление данных.

- [Tailwind CSS](https://tailwindcss.com) - Удобное решение для стилизации сайтов. Атомарные классы очень просты в применении. Также от части является дизайн системой с хорошими цветами, паддингами и т. д.

- [shadcn/ui](https://ui.shadcn.com) - Библиотека компонент с минималистичным оформлением по умолчанию. Под капотом Radix UI (который является очень доступной headless библиотекой компонент). Сами компоненты скачиваются прямиком в проект - в папку `/src/components/ui/`, что позволяет их кастомизировать как угодно.

- [reactuse](https://siberiacancode.github.io/reactuse) - Библиотека хуков с такой же философией как и у `shadcn/ui` - нужен хук? Добавляй скриптом его прямо себе в кодовую базу.

- [Axios](https://axios-http.com) - HTTP клиент для работы с API. Удобный интерфейс, поддержка interceptors, автоматическая сериализация JSON.

- [Recharts](https://recharts.org) - Библиотека для построения графиков и диаграмм на основе React и D3. Используется для отображения статистики модератора.

- [React Hotkeys Hook](https://react-hotkeys-hook.vercel.app) - Хук для работы с горячими клавишами. Позволяет легко добавлять keyboard shortcuts в приложение.

- [Lucide React](https://lucide.dev) - Библиотека иконок для React. Красивые, современные иконки с поддержкой tree-shaking.

- [date-fns](https://date-fns.org) - Современная библиотека для работы с датами. Легковесная альтернатива moment.js.

- [Vitest](https://vitest.dev) + [React Testing Library](https://testing-library.com/) - Библиотеки для Unit-тестирования. Vitest - быстрый тестовый раннер, совместимый с Vite. React Testing Library - лучшие практики для тестирования React компонентов.

- [ESLint](https://eslint.org/) - Помогает ловить ошибки в коде на этапах компиляции/написания кода

- [Prettier](https://prettier.io/) - Помогает соблюдать consistency в написании кода

## Чек-лист функциональных требований

### 1. Главная страница — Список объявлений (/list)

- [x] Отображение списка объявлений в виде карточек
  - [x] Изображение товара (placeholder)
  - [x] Название объявления
  - [x] Цена
  - [x] Категория
  - [x] Дата создания
  - [x] Статус (на модерации / одобрено / отклонено)
  - [x] Индикатор приоритета (обычный / срочный)
- [x] Фильтрация и поиск
  - [x] Фильтр по статусу (множественный выбор)
  - [x] Фильтр по категории
  - [x] Фильтр по диапазону цен
  - [x] Поиск по названию объявления
  - [x] Кнопка «Сброс всех фильтров»
- [x] Сортировка
  - [x] По дате создания (новые → старые / старые → новые)
  - [x] По цене (возрастание / убывание)
  - [x] По приоритету
- [x] Пагинация
  - [x] По 10 объявлений на страницу
  - [x] Навигация между страницами (вперёд/назад, номера страниц)
  - [x] Отображение общего количества объявлений

### 2. Страница детального просмотра объявления (/item/:id)

- [x] Переход по клику на карточку из списка
- [x] Информация об объявлении
  - [x] Галерея изображений (минимум 3, с переключением)
  - [x] Полное описание
  - [x] Характеристики товара (таблица ключ-значение)
  - [x] Информация о продавце
    - [x] Имя
    - [x] Рейтинг
    - [x] Количество объявлений
    - [x] Дата регистрации
- [x] История модерации
  - [x] Список всех действий (по каждому — кто, когда, решение, комментарий)
- [x] Панель действий модератора
  - [x] Кнопка «Одобрить» (зелёная)
  - [x] Кнопка «Отклонить» (красная)
  - [x] Кнопка «Вернуть на доработку» (жёлтая)
  - [x] При отклонении:
    - [x] Обязательное поле для причины
    - [x] Быстрые шаблоны причин:
      - [x] Запрещённый товар
      - [x] Неверная категория
      - [x] Некорректное описание
      - [x] Проблемы с фото
      - [x] Подозрение на мошенничество
      - [x] Другое (с полем ввода)
- [x] Навигация
  - [x] Кнопка «Назад к списку»
  - [x] Кнопки «Предыдущее» / «Следующее» объявление

### 3. Страница статистики модератора (/stats)

- [x] Общая статистика (карточки с метриками)
  - [x] Всего проверено объявлений (за сегодня / неделю / месяц)
  - [x] Процент одобренных
  - [x] Процент отклонённых
  - [x] Среднее время на проверку одного объявления
- [x] Графики
  - [x] Столбчатая диаграмма активности по дням (последние 7 дней)
  - [x] Круговая диаграмма распределения решений (одобрено / отклонено / на доработку)
  - [x] График по категориям проверенных объявлений
- [x] Фильтр по периоду
  - [x] Сегодня
  - [x] Последние 7 дней
  - [x] Последние 30 дней

## Чек-лист дополнительных возможностей

- [x] Горячие клавиши
  - [x] `A` — одобрить
  - [x] `D` — отклонить
  - [x] `→` — следующее объявление
  - [x] `←` — предыдущее объявление
  - [x] `/` — фокус на поиск
- [x] Bulk-операции
  - [x] Чекбоксы для выбора нескольких объявлений
  - [x] Массовое одобрение / отклонение
  - [x] Счётчик выбранных объявлений
- [ ] Продвинутая фильтрация
  - [ ] Сохранение наборов фильтров
  - [x] Синхронизация фильтров в URL (возможность поделиться ссылкой)
- [x] Тёмная тема
  - [x] Переключатель темы
  - [x] Сохранение выбора в `localStorage`
- [ ] Экспорт данных
  - [x] Экспорт статистики в CSV
  - [ ] Генерация PDF-отчёта
- [ ] Real-time обновления
  - [x] Автообновление списка новых объявлений
  - [ ] Счётчик новых объявлений
  - [x] Обновление статуса объявления без перезагрузки
- [ ] Анимации
  - [ ] Плавные переходы между страницами
  - [ ] Анимация появления карточек
  - [x] Progress bar при загрузке данных
